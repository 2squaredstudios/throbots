<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>ThroBots - Start</title>
  </head>
  <body>
    <h1>ThroBots</h1>
    <h2>Join Game</h2>
    <p>Name: <input placeholder="John Doe" id="name"></p>
    <h3>Online Game</h3>
    <p>Connect to dedicated server (not recommended, unless you know what you're doing): <input type="checkbox" id="dedicated"></p>
    <p><input id="address" placeholder="Lobby ID"><button onclick="player1();">Red</button><button onclick="player2();">Yellow</button><button onclick="player3();">Green</button><button onclick="player4();">Blue</button></p>
    <h3>LAN Game</h3>
    <p><span id="status">Scanning for LAN games...</span><button onclick="refresh();">Refresh</button></p>
    <p id="games"></p>
    <hr>
    <h2>Create Game</h2>
    <h3>Online Game</h3>
    <p><button onclick="newGame();">Get Lobby ID</button></p>
    <h3>LAN Game</h3>
    <p>To create a LAN game, run the dedicated server on port 25500. You need node.js to run the dedicated server.</p>
    <p>Use the command</p>
    <code>node server.js 25500 60 [worldfile]</code>
    <p>to run it with 60TPS and a world file that you specify.</p>
    <hr>
    <p><a href="levelbuilder.html">Level Builder</a></p>
    <hr>
    <p>A game by <a href="https://github.com/thecoder08">thecoder08</a> and <a href="https://github.com/WHERES-HARRY">WHERES-HARRY</a>. Sound from <a href="https://zapsplat.com">Zapsplat</a>.</p>
    <audio loop autoplay src="audio/throbots.wav"></audio>
    <script src="node_modules/@thecoder08/http/browser.js"></script>
    <script src="node_modules/@thecoder08/docuget/main.js"></script>
    <script>
      var lennetServer = '34.71.49.178';
      function player1() {
        if ($('#dedicated').checked) {
          document.location.href = 'game.html?name=' + $('#name').value + '&player=0&address=' + $('#address').value;
        }
        else {
          document.location.href = 'game.html?name=' + $('#name').value + '&player=0&address=' + lennetServer + ':65' + $('#address').value;
        }
      }
      function player2() {
       if ($('#dedicated').checked) {
          document.location.href = 'game.html?name=' + $('#name').value + '&player=1&address=' + $('#address').value;
        }
        else {
          document.location.href = 'game.html?name=' + $('#name').value + '&player=1&address=' + lennetServer + ':65' + $('#address').value;
        }
      }
      function player3() {
        if ($('#dedicated').checked) {
          document.location.href = 'game.html?name=' + $('#name').value + '&player=2&address=' + $('#address').value;
        }
        else {
          document.location.href = 'game.html?name=' + $('#name').value + '&player=2&address=' + lennetServer + ':65' + $('#address').value;
        }
      }
      function player4() {
        if ($('#dedicated').checked) {
          document.location.href = 'game.html?name=' + $('#name').value + '&player=3&address=' + $('#address').value;
        }
        else {
          document.location.href = 'game.html?name=' + $('#name').value + '&player=3&address=' + lennetServer + ':65' + $('#address').value;
        }
      }
      $('#dedicated').onclick = function() {
        if ($('#dedicated').checked) {
          $('#address').placeholder = 'Address';
        }
        else {
          $('#address').placeholder = 'Lobby ID';
        }
      }
      function newGame() {
        request('http://' + lennetServer + ':25568/getlennetlobbyid', function(data) {
          alert('Lobby ID to join: ' + data);
        });
      }
    </script>
    <script src="lan.js"></script>
  </body>
</html>
